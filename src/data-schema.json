{
    "$id": "h...",
    "$schema": "https://json-schema.org/draft-07/schema",
    "definitions": {
        "rewardCommand": {
            "properties": {
                "rewardTime": {
                    "type": "number",
                    "minimum": 0
                },
                "rewardPosition": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 1
                }
            }
        },
        "olfactometerStateCommand": {
            "properties": {
                "name": {
                    "description": "The alias of this olfactometer command",
                    "type": "string"
                },
                "flowEnabledO0": {
                    "description": "Boolean specifying whether to enable airflow across all channels in olfactometer 0",
                    "type": "boolean",
                    "default": "True"
                },
                "flowEnabledO1": {
                    "description": "Boolean specifying whether to enable airflow across all channels in olfactometer 1",
                    "type": "boolean",
                    "default": "True"
                },
                "valvesOpenO0": {
                    "items": {
                        "minimum": 0,
                        "maximum": 3,
                        "type": "integer"
                    },
                    "type": "array"
                },
                "valvesOpenO1": {
                    "items": {
                        "minimum": 0,
                        "maximum": 3,
                        "type": "integer"
                    },
                    "type": "array"
                },
                "endValvesOpenO0": {
                    "items": {
                        "minimum": 0,
                        "maximum": 1,
                        "type": "integer"
                    },
                    "type": "array"
                },
                "endValvesOpenO1": {
                    "items": {
                        "minimum": 0,
                        "maximum": 1,
                        "type": "integer"
                    },
                    "type": "array"
                },
                "targetFlowO0": {
                    "description": "The target flow rates of the 5 flow channels on olfactometer 0 in ml/min. Range for the odor channels is 0-100ml/min and 0-1000ml/min for the carrier line.",
                    "items": {
                        "minimum": 0,
                        "maximum": 1000,
                        "type": "number"
                    },
                    "type": "array",
                    "minItems": 5,
                    "maxItems": 5
                },
                "targetFlowO1": {
                    "description": "The target flow rates of the 5 flow channels on olfactometer 1 in ml/min. Range for the odor channels is 0-100ml/min and 0-1000ml/min for the carrier line.",
                    "items": {
                        "minimum": 0,
                        "maximum": 1000,
                        "type": "number"
                    },
                    "type": "array",
                    "minItems": 5,
                    "maxItems": 5
                }
            }
        },
        "valence": {
            "properties": {
                "command": {
                    "type": "string"
                },
                "rewarded": {
                    "type": "boolean"
                }
            }
        },
        "sequence": {
            "properties": {
                "name": {
                    "description": "The alias of this sequence",
                    "type": "string"
                },
                "defaultCommand": {
                    "description": "The default olfactometer command",
                    "default": "Default",
                    "type": "string"
                },
                "presentationTime": {
                    "description": "Presentation time in seconds of each sequence element",
                    "default": 1,
                    "type": "number"
                },
                "interCommand": {
                    "description": "Command in between presentations",
                    "default": "Purge",
                    "type": "string"
                },
                "interCommandTime": {
                    "description": "Time for inter-command in seconds",
                    "default": 0.2,
                    "type": "number"
                },
                "interTrialInterval": {
                    "description": "Time between trials in seconds",
                    "default": 5,
                    "type": "number"
                },
                "repeatCount": {
                    "description": "Integer specifying how many times a sequence is allowed to repeat",
                    "default": 1,
                    "type": "integer"
                },
                "responseTime": {
                    "description": "The allowed time window for a subject to make a response following stimulus presentation",
                    "default": 5,
                    "type": "number"
                },
                "maximumTime": {
                    "description": "The maximum time in seconds that a sequence can last",
                    "default": 10,
                    "type": "number"
                },
                "rewardCondition1": {
                    "items": {
                        "items": {
                            "$ref": "#/definitions/valence"
                        },
                        "type": "array"
                    },
                    "type": "array"
                },
                "rewardCondition2": {
                    "items": {
                        "items": {
                            "$ref": "#/definitions/valence"
                        },
                        "type": "array"
                    },
                    "type": "array"
                },
                "enableTrialIndicator": {
                    "description": "Boolean specifying whether to enable indicator for when a trial is ready to be initiated",
                    "default": "False",
                    "type": "boolean"
                },
                "enableRewardLocationIndicator": {
                    "description": "Boolean specifying whether to enable indicator for where a reward is available",
                    "default": "False",
                    "type": "boolean"
                },
                "resetOnReward": {
                    "description": "Boolean specifying whether a trial should ignore the response time and reset once a reward is given",
                    "default": "False",
                    "type": "boolean"
                }
            }
        }
    },
    "properties": {
        "metadata": {
            "properties": {
                "animalId": {
                    "default": "",
                    "type": "string"
                    },
                "rootPath": {
                    "default": "",
                    "type": "string"
                },
                "minimumSampleTime": {
                    "description": "Minimum amount of time in seconds an animal must sample the poke to initiate a trial",
                    "default": 0.1,
                    "type": "number"
                },
                "sampleOffsetTime": {
                    "description": "Time in seconds after sampling offset when subject is considered to have disengaged sampling",
                    "default": 0.1,
                    "type": "number"
                },
                "rewardTime": {
                    "description": "Time in seconds to deliver rewards",
                    "default": 0.13,
                    "type": "number"
                },
                "loggingRootPath": {
                    "description": "The local root folder to save data for this session",
                    "default": "",
                    "type": "string"
                }
            }
        },
        "cameraProperties": {
            "properties": {
                "frameRate": {
                    "default": 60,
                    "type": "number",
                    "description": "The target camera frame rate in frames per second."
                },
                "exposure": {
                    "default": 19000,
                    "type": "number",
                    "description": "The frame exposure in microseconds."
                },
                "gain": {
                    "default": 0,
                    "type": "number",
                    "description": "the gain of the camera sensor."
                }   
            }
        },
        "olfactometerCommands": {
            "items": {
                "$ref": "#/definitions/olfactometerStateCommand"
            },
            "type": "array"
        },
        "sequences": {
            "items": {
                "$ref": "#/definitions/sequence"
            },
            "type": "array"
        }
    },
    "title": "HypnoseSession",
    "type": "object"
}